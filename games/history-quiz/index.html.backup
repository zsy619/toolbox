<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†å²çŸ¥è¯†é—®ç­” - ç©¿è¶Šå†å²é•¿æ²³</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 50%, #6c5ce7 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .game-title {
            font-size: 2.5em;
            font-weight: 700;
            color: #2d3436;
            margin-bottom: 10px;
        }

        .game-subtitle {
            color: #636e72;
            font-size: 1.1em;
        }

        .quiz-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
            font-weight: bold;
            color: #2d3436;
            font-size: 1em;
        }

        .info-item {
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .score-info {
            color: #e74c3c;
        }

        .question-info {
            color: #9b59b6;
        }

        .time-info {
            color: #27ae60;
        }

        .era-info {
            color: #3498db;
        }

        .question-card {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .era-badge {
            display: inline-block;
            background: #9b59b6;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.3em;
            font-weight: 600;
            color: #2d3436;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .historical-context {
            background: #e8f6f3;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            color: #27ae60;
            font-style: italic;
            display: none;
        }

        .historical-context.show {
            display: block;
        }

        .answers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .answer-button {
            padding: 15px 20px;
            background: #9b59b6;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .answer-button:hover {
            background: #8e44ad;
            transform: translateY(-2px);
        }

        .answer-button.correct {
            background: #00b894;
            animation: correctAnswer 0.5s ease;
        }

        .answer-button.wrong {
            background: #e74c3c;
            animation: wrongAnswer 0.5s ease;
        }

        .answer-button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes wrongAnswer {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
            100% { transform: translateX(0); }
        }

        .quiz-controls {
            text-align: center;
            margin: 20px 0;
        }

        .control-button {
            padding: 12px 25px;
            background: #9b59b6;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            background: #8e44ad;
            transform: translateY(-2px);
        }

        .control-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .message {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            font-weight: bold;
            display: none;
        }

        .message.show {
            display: block;
        }

        .message.correct {
            background: #d5f4e6;
            color: #00b894;
        }

        .message.wrong {
            background: #ffeaa7;
            color: #e17055;
        }

        .message.final {
            background: #a29bfe;
            color: white;
        }

        .era-selector {
            text-align: center;
            margin: 20px 0;
        }

        .era-button {
            padding: 10px 20px;
            background: #ddd;
            color: #2d3436;
            border: none;
            border-radius: 20px;
            margin: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .era-button.active {
            background: #9b59b6;
            color: white;
        }

        .era-button:hover {
            transform: translateY(-2px);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ddd;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #9b59b6;
            width: 0%;
            transition: width 0.3s ease;
        }

        .timer {
            text-align: center;
            margin: 15px 0;
            font-size: 1.2em;
            font-weight: bold;
            color: #2d3436;
        }

        .timer.warning {
            color: #e74c3c;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .hint-box {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            display: none;
        }

        .hint-box.show {
            display: block;
        }

        .hint-text {
            color: #3498db;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .game-container {
                padding: 20px;
                margin: 10px;
            }

            .quiz-info {
                grid-template-columns: repeat(2, 1fr);
            }

            .answers-grid {
                grid-template-columns: 1fr;
            }

            .era-selector {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 5px;
            }

            .game-title {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1 class="game-title">ğŸ“š å†å²çŸ¥è¯†é—®ç­”</h1>
            <p class="game-subtitle">ç©¿è¶Šå†å²é•¿æ²³ - æ¢ç´¢äººç±»æ–‡æ˜çš„è¶³è¿¹ï¼</p>
        </div>

        <div class="era-selector">
            <div style="font-weight: bold; color: #2d3436; margin-bottom: 10px;">é€‰æ‹©å†å²æ—¶æœŸ</div>
            <button class="era-button active" data-era="all">å…¨æ—¶æœŸ</button>
            <button class="era-button" data-era="ancient">å¤ä»£å²</button>
            <button class="era-button" data-era="medieval">ä¸­ä¸–çºª</button>
            <button class="era-button" data-era="modern">è¿‘ç°ä»£</button>
            <button class="era-button" data-era="contemporary">å½“ä»£å²</button>
        </div>

        <div class="quiz-info">
            <div class="info-item score-info">
                å¾—åˆ†: <span id="score">0</span>
            </div>
            <div class="info-item question-info">
                é¢˜ç›®: <span id="currentQuestion">1</span>/10
            </div>
            <div class="info-item time-info">
                æ­£ç¡®ç‡: <span id="accuracy">0%</span>
            </div>
            <div class="info-item era-info">
                æ—¶æœŸ: <span id="currentEra">å…¨æ—¶æœŸ</span>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="timer" id="timer">
            â° æ—¶é—´: <span id="timeLeft">30</span>ç§’
        </div>

        <div class="question-card" id="questionCard">
            <div class="era-badge" id="eraBadge">å†å²æ—¶æœŸ</div>
            <div class="question-text" id="questionText">å‡†å¤‡å¼€å§‹å†å²çŸ¥è¯†é—®ç­”ï¼</div>
            <div class="hint-box" id="hintBox">
                <div class="hint-text" id="hintText"></div>
            </div>
            <div class="historical-context" id="historicalContext"></div>
        </div>

        <div class="answers-grid" id="answersGrid">
            <!-- ç­”æ¡ˆé€‰é¡¹åŠ¨æ€ç”Ÿæˆ -->
        </div>

        <div class="message" id="message"></div>

        <div class="quiz-controls">
            <button class="control-button" id="startButton">å¼€å§‹ç­”é¢˜</button>
            <button class="control-button" id="hintButton" style="display: none;">ğŸ’¡ æç¤º</button>
            <button class="control-button" id="nextButton" style="display: none;">ä¸‹ä¸€é¢˜</button>
            <button class="control-button" id="restartButton" style="display: none;">é‡æ–°å¼€å§‹</button>
        </div>
    </div>

    <script>
        class HistoryQuiz {
            constructor() {
                this.currentQuestionIndex = 0;
                this.score = 0;
                this.totalQuestions = 10;
                this.correctAnswers = 0;
                this.selectedEra = 'all';
                this.answered = false;
                this.hintUsed = false;
                this.timeLeft = 30;
                this.timerInterval = null;
                
                this.questions = {
                    ancient: [
                        {
                            era: "å¤ä»£å²",
                            question: "ä¸­å›½ç¬¬ä¸€ä¸ªç»Ÿä¸€çš„å°å»ºç‹æœæ˜¯ï¼Ÿ",
                            answers: ["å¤æœ", "å•†æœ", "ç§¦æœ", "æ±‰æœ"],
                            correct: 2,
                            hint: "è¿™ä¸ªæœä»£åªå­˜åœ¨äº†15å¹´",
                            explanation: "ç§¦æœæ˜¯ä¸­å›½å†å²ä¸Šç¬¬ä¸€ä¸ªç»Ÿä¸€çš„å°å»ºç‹æœï¼Œç”±ç§¦å§‹çš‡å»ºç«‹äºå…¬å…ƒå‰221å¹´",
                            context: "ç§¦ç»Ÿä¸€å…­å›½åï¼Œå»ºç«‹äº†ä¸­å¤®é›†æƒåˆ¶åº¦ï¼Œç»Ÿä¸€äº†æ–‡å­—ã€è´§å¸ã€åº¦é‡è¡¡"
                        },
                        {
                            era: "å¤ä»£å²",
                            question: "å¤åŸƒåŠæœ€è‘—åçš„æ³•è€æ˜¯ï¼Ÿ",
                            answers: ["å›¾å¦å¡è’™", "æ‹‰ç¾è¥¿æ–¯äºŒä¸–", "èƒ¡å¤«", "å…‹å¨„å·´ç‰¹æ‹‰ä¸ƒä¸–"],
                            correct: 1,
                            hint: "ä»–åœ¨ä½67å¹´ï¼Œå»ºé€ äº†å¾ˆå¤šç¥åº™",
                            explanation: "æ‹‰ç¾è¥¿æ–¯äºŒä¸–ç»Ÿæ²»åŸƒåŠ67å¹´ï¼Œæ˜¯åŸƒåŠå†å²ä¸Šæœ€ä¼Ÿå¤§çš„æ³•è€ä¹‹ä¸€",
                            context: "æ‹‰ç¾è¥¿æ–¯äºŒä¸–æ—¶æœŸæ˜¯å¤åŸƒåŠæ–°ç‹å›½æ—¶æœŸçš„é¼ç››æ—¶ä»£"
                        },
                        {
                            era: "å¤ä»£å²",
                            question: "å¤å¸Œè…Šé›…å…¸æ°‘ä¸»åˆ¶çš„åˆ›ç«‹è€…æ˜¯ï¼Ÿ",
                            answers: ["è‹æ ¼æ‹‰åº•", "æŸæ‹‰å›¾", "æ¢­ä¼¦", "äºšé‡Œå£«å¤šå¾·"],
                            correct: 2,
                            hint: "ä»–æ˜¯å¤å¸Œè…Šä¸ƒè´¤ä¹‹ä¸€",
                            explanation: "æ¢­ä¼¦é€šè¿‡æ”¹é©ä¸ºé›…å…¸æ°‘ä¸»åˆ¶å¥ å®šäº†åŸºç¡€",
                            context: "æ¢­ä¼¦æ”¹é©åºŸé™¤äº†å€ºåŠ¡å¥´éš¶åˆ¶ï¼Œä¸ºå¹³æ°‘å‚æ”¿åˆ›é€ äº†æ¡ä»¶"
                        },
                        {
                            era: "å¤ä»£å²",
                            question: "æ˜¥ç§‹æ—¶æœŸå­”å­æå‡ºçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Ÿ",
                            answers: ["æ³•æ²»", "ä»æ”¿", "æ— ä¸º", "å…¼çˆ±"],
                            correct: 1,
                            hint: "è¿™ä¸ªå­—çš„å«ä¹‰æ˜¯çˆ±äºº",
                            explanation: "å­”å­æå‡º'ä»'çš„æ€æƒ³ï¼Œå¼ºè°ƒçˆ±äººã€å…‹å·±å¤ç¤¼",
                            context: "ä»æ”¿æ€æƒ³å½±å“äº†ä¸­å›½ä¸¤åƒå¤šå¹´çš„æ”¿æ²»æ–‡åŒ–"
                        },
                        {
                            era: "å¤ä»£å²",
                            question: "ç½—é©¬å¸å›½çš„ç¬¬ä¸€ä»»çš‡å¸æ˜¯ï¼Ÿ",
                            answers: ["å‡¯æ’’", "å±‹å¤§ç»´", "å®‰ä¸œå°¼", "åºè´"],
                            correct: 1,
                            hint: "ä»–çš„å°Šå·æ˜¯å¥¥å¤æ–¯éƒ½",
                            explanation: "å±‹å¤§ç»´ï¼ˆå¥¥å¤æ–¯éƒ½ï¼‰æ˜¯ç½—é©¬å¸å›½çš„ç¬¬ä¸€ä»»çš‡å¸",
                            context: "å±‹å¤§ç»´ç»“æŸäº†ç½—é©¬å…±å’Œå›½æ—¶æœŸçš„å†…æˆ˜ï¼Œå¼€åˆ›äº†ç½—é©¬å¸å›½"
                        }
                    ],
                    medieval: [
                        {
                            era: "ä¸­ä¸–çºª",
                            question: "æŸ¥ç†æ›¼å¤§å¸å»ºç«‹çš„å¸å›½è¢«ç§°ä¸ºï¼Ÿ",
                            answers: ["ç¥åœ£ç½—é©¬å¸å›½", "æ³•å…°å…‹ç‹å›½", "åŠ æ´›æ—å¸å›½", "è¥¿æ³•å…°å…‹ç‹å›½"],
                            correct: 2,
                            hint: "ä»¥ä»–çš„å®¶æ—å‘½å",
                            explanation: "æŸ¥ç†æ›¼å»ºç«‹çš„åŠ æ´›æ—å¸å›½ç»Ÿæ²»è¥¿æ¬§å¤§éƒ¨åˆ†åœ°åŒº",
                            context: "åŠ æ´›æ—å¸å›½çš„å»ºç«‹æ ‡å¿—ç€è¥¿æ¬§æ”¿æ²»ç»Ÿä¸€çš„çŸ­æš‚å®ç°"
                        },
                        {
                            era: "ä¸­ä¸–çºª",
                            question: "ä¸­å›½å”æœçš„å¼€å›½çš‡å¸æ˜¯ï¼Ÿ",
                            answers: ["æä¸–æ°‘", "ææ¸Š", "ææ²»", "æéš†åŸº"],
                            correct: 1,
                            hint: "ä»–çš„åº™å·æ˜¯é«˜ç¥–",
                            explanation: "ææ¸Šï¼ˆå”é«˜ç¥–ï¼‰å»ºç«‹äº†å”æœ",
                            context: "å”æœæ˜¯ä¸­å›½å†å²ä¸Šæœ€å¼ºç››çš„æœä»£ä¹‹ä¸€ï¼Œå›½é™…å½±å“å·¨å¤§"
                        },
                        {
                            era: "ä¸­ä¸–çºª",
                            question: "å®‹æœå‘æ˜çš„å››å¤§å‘æ˜ä¸åŒ…æ‹¬ï¼Ÿ",
                            answers: ["æŒ‡å—é’ˆ", "ç«è¯", "é€ çº¸æœ¯", "å°åˆ·æœ¯"],
                            correct: 2,
                            hint: "è¿™é¡¹å‘æ˜å‡ºç°å¾—æ›´æ—©",
                            explanation: "é€ çº¸æœ¯æ˜¯æ±‰æœè”¡ä¼¦å‘æ˜çš„ï¼Œä¸æ˜¯å®‹æœ",
                            context: "å››å¤§å‘æ˜å¯¹ä¸–ç•Œæ–‡æ˜å‘å±•äº§ç”Ÿäº†æ·±è¿œå½±å“"
                        },
                        {
                            era: "ä¸­ä¸–çºª",
                            question: "åå­—å†›ä¸œå¾å¼€å§‹äºå“ªä¸€å¹´ï¼Ÿ",
                            answers: ["1095å¹´", "1096å¹´", "1097å¹´", "1099å¹´"],
                            correct: 0,
                            hint: "æ•™çš‡ä¹Œå°”ç­äºŒä¸–å‘åŠ¨",
                            explanation: "1095å¹´æ•™çš‡ä¹Œå°”ç­äºŒä¸–å‘åŠ¨äº†ç¬¬ä¸€æ¬¡åå­—å†›ä¸œå¾",
                            context: "åå­—å†›ä¸œå¾æŒç»­äº†è¿‘200å¹´ï¼Œå½±å“äº†ä¸œè¥¿æ–¹æ–‡åŒ–äº¤æµ"
                        },
                        {
                            era: "ä¸­ä¸–çºª",
                            question: "è’™å¤å¸å›½çš„å»ºç«‹è€…æ˜¯ï¼Ÿ",
                            answers: ["æˆå‰æ€æ±—", "çªé˜”å°", "è’™å“¥", "å¿½å¿…çƒˆ"],
                            correct: 0,
                            hint: "ä»–åŸåé“æœ¨çœŸ",
                            explanation: "æˆå‰æ€æ±—ï¼ˆé“æœ¨çœŸï¼‰ç»Ÿä¸€è’™å¤éƒ¨è½ï¼Œå»ºç«‹è’™å¤å¸å›½",
                            context: "è’™å¤å¸å›½æ˜¯å†å²ä¸Šç–†åŸŸæœ€å¤§çš„å¸å›½"
                        }
                    ],
                    modern: [
                        {
                            era: "è¿‘ç°ä»£",
                            question: "æ–‡è‰ºå¤å…´è¿åŠ¨èµ·æºäºå“ªä¸ªå›½å®¶ï¼Ÿ",
                            answers: ["æ³•å›½", "è‹±å›½", "æ„å¤§åˆ©", "å¾·å›½"],
                            correct: 2,
                            hint: "è¿™é‡Œæœ‰å¾ˆå¤šåŸé‚¦å›½å®¶",
                            explanation: "æ–‡è‰ºå¤å…´è¿åŠ¨èµ·æºäº14ä¸–çºªçš„æ„å¤§åˆ©",
                            context: "æ–‡è‰ºå¤å…´æ ‡å¿—ç€æ¬§æ´²ä»ä¸­ä¸–çºªå‘è¿‘ä»£çš„è½¬å˜"
                        },
                        {
                            era: "è¿‘ç°ä»£",
                            question: "ç¾å›½ç‹¬ç«‹æˆ˜äº‰å¼€å§‹äºå“ªä¸€å¹´ï¼Ÿ",
                            answers: ["1775å¹´", "1776å¹´", "1777å¹´", "1783å¹´"],
                            correct: 0,
                            hint: "æ¯”ã€Šç‹¬ç«‹å®£è¨€ã€‹æ—©ä¸€å¹´",
                            explanation: "ç¾å›½ç‹¬ç«‹æˆ˜äº‰å§‹äº1775å¹´çš„æ¥å…‹æ˜Ÿé¡¿æˆ˜å½¹",
                            context: "ç‹¬ç«‹æˆ˜äº‰å»ºç«‹äº†ä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªç°ä»£å…±å’Œå›½"
                        },
                        {
                            era: "è¿‘ç°ä»£",
                            question: "æ³•å›½å¤§é©å‘½çˆ†å‘äºå“ªä¸€å¹´ï¼Ÿ",
                            answers: ["1789å¹´", "1790å¹´", "1791å¹´", "1792å¹´"],
                            correct: 0,
                            hint: "æ”»å å·´å£«åº•ç‹±çš„å¹´ä»½",
                            explanation: "æ³•å›½å¤§é©å‘½çˆ†å‘äº1789å¹´7æœˆ14æ—¥",
                            context: "æ³•å›½å¤§é©å‘½æå‡ºäº†è‡ªç”±ã€å¹³ç­‰ã€åšçˆ±çš„ç†å¿µ"
                        },
                        {
                            era: "è¿‘ç°ä»£",
                            question: "å·¥ä¸šé©å‘½æœ€æ—©å‘ç”Ÿåœ¨å“ªä¸ªå›½å®¶ï¼Ÿ",
                            answers: ["æ³•å›½", "è‹±å›½", "å¾·å›½", "ç¾å›½"],
                            correct: 1,
                            hint: "è¿™é‡Œæœ€æ—©å‡ºç°äº†è’¸æ±½æœº",
                            explanation: "å·¥ä¸šé©å‘½æœ€æ—©åœ¨18ä¸–çºªçš„è‹±å›½å¼€å§‹",
                            context: "å·¥ä¸šé©å‘½å½»åº•æ”¹å˜äº†äººç±»çš„ç”Ÿäº§å’Œç”Ÿæ´»æ–¹å¼"
                        },
                        {
                            era: "è¿‘ç°ä»£",
                            question: "æ‹¿ç ´ä»‘æˆ˜äº‰ç»“æŸäºå“ªä¸€å¹´ï¼Ÿ",
                            answers: ["1814å¹´", "1815å¹´", "1816å¹´", "1821å¹´"],
                            correct: 1,
                            hint: "æ»‘é“å¢æˆ˜å½¹çš„å¹´ä»½",
                            explanation: "æ‹¿ç ´ä»‘æˆ˜äº‰ç»“æŸäº1815å¹´æ»‘é“å¢æˆ˜å½¹",
                            context: "æ‹¿ç ´ä»‘æˆ˜äº‰é‡å¡‘äº†æ¬§æ´²çš„æ”¿æ²»æ ¼å±€"
                        }
                    ],
                    contemporary: [
                        {
                            era: "å½“ä»£å²",
                            question: "ç¬¬ä¸€æ¬¡ä¸–ç•Œå¤§æˆ˜å¼€å§‹äºå“ªä¸€å¹´ï¼Ÿ",
                            answers: ["1913å¹´", "1914å¹´", "1915å¹´", "1916å¹´"],
                            correct: 1,
                            hint: "è¨æ‹‰çƒ­çªäº‹ä»¶çš„å¹´ä»½",
                            explanation: "ç¬¬ä¸€æ¬¡ä¸–ç•Œå¤§æˆ˜å§‹äº1914å¹´çš„è¨æ‹‰çƒ­çªäº‹ä»¶",
                            context: "ä¸€æˆ˜æ ‡å¿—ç€'æ—§æ¬§æ´²'çš„ç»ˆç»“å’Œç°ä»£ä¸–ç•Œçš„å¼€å§‹"
                        },
                        {
                            era: "å½“ä»£å²",
                            question: "äºŒæˆ˜ä¸­è¯ºæ›¼åº•ç™»é™†å‘ç”Ÿåœ¨å“ªä¸€å¹´ï¼Ÿ",
                            answers: ["1943å¹´", "1944å¹´", "1945å¹´", "1946å¹´"],
                            correct: 1,
                            hint: "D-Dayæ˜¯6æœˆ6æ—¥",
                            explanation: "è¯ºæ›¼åº•ç™»é™†å‘ç”Ÿåœ¨1944å¹´6æœˆ6æ—¥",
                            context: "è¯ºæ›¼åº•ç™»é™†å¼€è¾Ÿäº†æ¬§æ´²ç¬¬äºŒæˆ˜åœºï¼ŒåŠ é€Ÿäº†äºŒæˆ˜ç»“æŸ"
                        },
                        {
                            era: "å½“ä»£å²",
                            question: "ä¸­åäººæ°‘å…±å’Œå›½æˆç«‹äºå“ªä¸€å¹´ï¼Ÿ",
                            answers: ["1948å¹´", "1949å¹´", "1950å¹´", "1951å¹´"],
                            correct: 1,
                            hint: "æ¯›æ³½ä¸œå®£å¸ƒä¸­å›½äººæ°‘ç«™èµ·æ¥äº†",
                            explanation: "ä¸­åäººæ°‘å…±å’Œå›½æˆç«‹äº1949å¹´10æœˆ1æ—¥",
                            context: "æ–°ä¸­å›½çš„æˆç«‹æ ‡å¿—ç€ä¸­å›½å†å²æ–°çºªå…ƒçš„å¼€å§‹"
                        },
                        {
                            era: "å½“ä»£å²",
                            question: "å†·æˆ˜å¼€å§‹çš„æ ‡å¿—æ€§äº‹ä»¶æ˜¯ï¼Ÿ",
                            answers: ["é›…å°”å¡”ä¼šè®®", "æ³¢èŒ¨å¦ä¼šè®®", "é©¬æ­‡å°”è®¡åˆ’", "æœé²é—¨ä¸»ä¹‰"],
                            correct: 3,
                            hint: "è¿™æ˜¯ç¾å›½çš„ä¸€é¡¹æ”¿ç­–",
                            explanation: "æœé²é—¨ä¸»ä¹‰æ ‡å¿—ç€å†·æˆ˜çš„å¼€å§‹",
                            context: "å†·æˆ˜æŒç»­äº†è¿‘åŠä¸ªä¸–çºªï¼Œå½±å“äº†ä¸–ç•Œæ ¼å±€"
                        },
                        {
                            era: "å½“ä»£å²",
                            question: "è‹è”è§£ä½“å‘ç”Ÿåœ¨å“ªä¸€å¹´ï¼Ÿ",
                            answers: ["1989å¹´", "1990å¹´", "1991å¹´", "1992å¹´"],
                            correct: 2,
                            hint: "æˆˆå°”å·´ä¹”å¤«è¾èŒçš„å¹´ä»½",
                            explanation: "è‹è”äº1991å¹´12æœˆ25æ—¥æ­£å¼è§£ä½“",
                            context: "è‹è”è§£ä½“æ ‡å¿—ç€å†·æˆ˜çš„ç»“æŸå’Œæ–°ä¸–ç•Œç§©åºçš„å½¢æˆ"
                        }
                    ]
                };
                
                this.bindEvents();
                this.updateUI();
            }

            bindEvents() {
                document.getElementById('startButton').addEventListener('click', () => {
                    this.startQuiz();
                });

                document.getElementById('nextButton').addEventListener('click', () => {
                    this.nextQuestion();
                });

                document.getElementById('restartButton').addEventListener('click', () => {
                    this.restartQuiz();
                });

                document.getElementById('hintButton').addEventListener('click', () => {
                    this.showHint();
                });

                document.querySelectorAll('.era-button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        this.setEra(e.target.dataset.era);
                    });
                });
            }

            setEra(era) {
                this.selectedEra = era;
                document.querySelectorAll('.era-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-era="${era}"]`).classList.add('active');
                
                const eraNames = {
                    all: 'å…¨æ—¶æœŸ',
                    ancient: 'å¤ä»£å²',
                    medieval: 'ä¸­ä¸–çºª',
                    modern: 'è¿‘ç°ä»£',
                    contemporary: 'å½“ä»£å²'
                };
                document.getElementById('currentEra').textContent = eraNames[era];
            }

            startQuiz() {
                this.currentQuestionIndex = 0;
                this.score = 0;
                this.correctAnswers = 0;
                this.prepareQuestions();
                this.showQuestion();
                
                document.getElementById('startButton').style.display = 'none';
                document.getElementById('hintButton').style.display = 'inline-block';
                
                this.updateUI();
            }

            prepareQuestions() {
                let questionPool = [];
                
                if (this.selectedEra === 'all') {
                    Object.values(this.questions).forEach(eraQuestions => {
                        questionPool = questionPool.concat(eraQuestions);
                    });
                } else {
                    questionPool = this.questions[this.selectedEra] || [];
                }
                
                // éšæœºæ‰“ä¹±é—®é¢˜
                this.currentQuestions = [];
                for (let i = 0; i < this.totalQuestions && i < questionPool.length; i++) {
                    const randomIndex = Math.floor(Math.random() * questionPool.length);
                    this.currentQuestions.push(questionPool[randomIndex]);
                    questionPool.splice(randomIndex, 1);
                }
            }

            showQuestion() {
                if (this.currentQuestionIndex >= this.totalQuestions || 
                    this.currentQuestionIndex >= this.currentQuestions.length) {
                    this.endQuiz();
                    return;
                }

                const question = this.currentQuestions[this.currentQuestionIndex];
                document.getElementById('eraBadge').textContent = question.era;
                document.getElementById('questionText').textContent = question.question;
                
                this.answered = false;
                this.hintUsed = false;
                this.timeLeft = 30;
                
                document.getElementById('hintBox').classList.remove('show');
                document.getElementById('historicalContext').classList.remove('show');
                document.getElementById('nextButton').style.display = 'none';
                document.getElementById('hintButton').style.display = 'inline-block';
                
                this.renderAnswers(question);
                this.updateProgress();
                this.updateUI();
                this.startTimer();
            }

            startTimer() {
                this.clearTimer();
                this.timerInterval = setInterval(() => {
                    this.timeLeft--;
                    this.updateTimer();
                    
                    if (this.timeLeft <= 0) {
                        this.timeUp();
                    }
                }, 1000);
            }

            clearTimer() {
                if (this.timerInterval) {
                    clearInterval(this.timerInterval);
                    this.timerInterval = null;
                }
            }

            updateTimer() {
                const timerElement = document.getElementById('timeLeft');
                const timerContainer = document.getElementById('timer');
                
                timerElement.textContent = this.timeLeft;
                
                if (this.timeLeft <= 10) {
                    timerContainer.classList.add('warning');
                } else {
                    timerContainer.classList.remove('warning');
                }
            }

            timeUp() {
                if (!this.answered) {
                    this.clearTimer();
                    this.answered = true;
                    this.showMessage('â° æ—¶é—´åˆ°ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š' + 
                        this.currentQuestions[this.currentQuestionIndex].answers[
                            this.currentQuestions[this.currentQuestionIndex].correct
                        ], 'wrong');
                    
                    const buttons = document.querySelectorAll('.answer-button');
                    buttons.forEach((button, index) => {
                        button.disabled = true;
                        if (index === this.currentQuestions[this.currentQuestionIndex].correct) {
                            button.classList.add('correct');
                        }
                    });
                    
                    setTimeout(() => {
                        this.showContext();
                        document.getElementById('nextButton').style.display = 'inline-block';
                        document.getElementById('hintButton').style.display = 'none';
                    }, 1500);
                    
                    this.updateUI();
                }
            }

            renderAnswers(question) {
                const grid = document.getElementById('answersGrid');
                grid.innerHTML = '';
                
                question.answers.forEach((answer, index) => {
                    const button = document.createElement('button');
                    button.className = 'answer-button';
                    button.textContent = answer;
                    button.addEventListener('click', () => this.selectAnswer(index));
                    grid.appendChild(button);
                });
            }

            selectAnswer(selectedIndex) {
                if (this.answered) return;
                
                this.clearTimer();
                this.answered = true;
                const question = this.currentQuestions[this.currentQuestionIndex];
                const buttons = document.querySelectorAll('.answer-button');
                
                buttons.forEach((button, index) => {
                    button.disabled = true;
                    if (index === question.correct) {
                        button.classList.add('correct');
                    } else if (index === selectedIndex && index !== question.correct) {
                        button.classList.add('wrong');
                    }
                });

                if (selectedIndex === question.correct) {
                    this.correctAnswers++;
                    const timeBonus = Math.max(0, this.timeLeft);
                    const hintPenalty = this.hintUsed ? 5 : 0;
                    const points = 10 + timeBonus - hintPenalty;
                    this.score += points;
                    this.showMessage(`ğŸ‰ æ­£ç¡®ï¼+${points}åˆ† (æ—¶é—´å¥–åŠ±:${timeBonus}, æç¤ºæ‰£åˆ†:${hintPenalty})`, 'correct');
                } else {
                    this.showMessage(`âŒ é”™è¯¯ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${question.answers[question.correct]}`, 'wrong');
                }

                setTimeout(() => {
                    this.showContext();
                    document.getElementById('nextButton').style.display = 'inline-block';
                    document.getElementById('hintButton').style.display = 'none';
                }, 1500);

                this.updateUI();
            }

            showContext() {
                const question = this.currentQuestions[this.currentQuestionIndex];
                const contextElement = document.getElementById('historicalContext');
                contextElement.innerHTML = `
                    <strong>ğŸ’¡ ${question.explanation}</strong><br>
                    <br>ğŸ“– ${question.context}
                `;
                contextElement.classList.add('show');
            }

            showHint() {
                if (this.answered || this.hintUsed) return;
                
                this.hintUsed = true;
                const question = this.currentQuestions[this.currentQuestionIndex];
                document.getElementById('hintText').textContent = question.hint;
                document.getElementById('hintBox').classList.add('show');
                document.getElementById('hintButton').style.display = 'none';
            }

            nextQuestion() {
                this.currentQuestionIndex++;
                this.hideMessage();
                this.showQuestion();
            }

            endQuiz() {
                this.clearTimer();
                const accuracy = Math.round((this.correctAnswers / this.totalQuestions) * 100);
                let grade = '';
                
                if (accuracy >= 90) grade = 'ğŸ† å†å²å­¦å®¶ï¼ä½ å¯¹å†å²äº†å¦‚æŒ‡æŒï¼';
                else if (accuracy >= 70) grade = 'ğŸ“š å†å²çˆ±å¥½è€…ï¼ç»§ç»­æ¢ç´¢å†å²ï¼';
                else if (accuracy >= 50) grade = 'ğŸ“ å†å²å­¦å¾’ï¼å¤šè¯»å†å²ä¹¦ç±ï¼';
                else grade = 'ğŸ“– å†å²æ–°æ‰‹ï¼é‡æ–°å­¦ä¹ å†å²çŸ¥è¯†ï¼';

                this.showMessage(`ğŸŠ æµ‹è¯•å®Œæˆï¼\nå¾—åˆ†ï¼š${this.score}åˆ†\næ­£ç¡®ç‡ï¼š${accuracy}%\n${grade}`, 'final');
                
                document.getElementById('nextButton').style.display = 'none';
                document.getElementById('hintButton').style.display = 'none';
                document.getElementById('restartButton').style.display = 'inline-block';
            }

            restartQuiz() {
                this.clearTimer();
                this.currentQuestionIndex = 0;
                this.score = 0;
                this.correctAnswers = 0;
                this.answered = false;
                
                document.getElementById('eraBadge').textContent = 'å†å²æ—¶æœŸ';
                document.getElementById('questionText').textContent = 'å‡†å¤‡å¼€å§‹å†å²çŸ¥è¯†é—®ç­”ï¼';
                document.getElementById('answersGrid').innerHTML = '';
                document.getElementById('startButton').style.display = 'inline-block';
                document.getElementById('restartButton').style.display = 'none';
                document.getElementById('hintButton').style.display = 'none';
                document.getElementById('nextButton').style.display = 'none';
                document.getElementById('timer').classList.remove('warning');
                
                this.hideMessage();
                this.updateUI();
                this.updateProgress();
            }

            updateProgress() {
                const progress = (this.currentQuestionIndex / this.totalQuestions) * 100;
                document.getElementById('progressFill').style.width = progress + '%';
            }

            updateUI() {
                document.getElementById('score').textContent = this.score;
                document.getElementById('currentQuestion').textContent = this.currentQuestionIndex + 1;
                
                if (this.totalQuestions > 0) {
                    const accuracy = Math.round((this.correctAnswers / Math.max(1, this.currentQuestionIndex)) * 100);
                    document.getElementById('accuracy').textContent = accuracy + '%';
                }
            }

            showMessage(text, type) {
                const message = document.getElementById('message');
                message.textContent = text;
                message.className = `message ${type} show`;
            }

            hideMessage() {
                const message = document.getElementById('message');
                message.classList.remove('show');
            }
        }

        // å¯åŠ¨æ¸¸æˆ
        window.addEventListener('load', () => {
            new HistoryQuiz();
        });
    </script>
</body>
</html>