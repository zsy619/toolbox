<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¶…çº§é©¬é‡Œå¥¥ - ç»å…¸å¹³å°è·³è·ƒæ¸¸æˆ</title>
    <link rel="stylesheet" href="../action-games-design-standard.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <a href="../index.html" class="back-btn">â† è¿”å›æ¸¸æˆåˆ—è¡¨</a>
    <div class="game-container">
        <h1>ğŸ„ è¶…çº§é©¬é‡Œå¥¥</h1>
        <div class="game-info">
            <p>ç»å…¸å¹³å°è·³è·ƒæ¸¸æˆï¼Œæ”¶é›†é‡‘å¸è¸©è¸æ•Œäºº</p>
            <p><strong>æ“ä½œæ–¹å¼ï¼š</strong> A/Då·¦å³ç§»åŠ¨, Wè·³è·ƒ, ç©ºæ ¼æ”»å‡»</p>
        </div>
        
        <div class="mario-stats">
            <div class="status-item">
                <div class="status-value" id="score">0</div>
                <div class="status-label">åˆ†æ•°</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="lives">3</div>
                <div class="status-label">ç”Ÿå‘½</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="coins">0</div>
                <div class="status-label">é‡‘å¸</div>
            </div>
        </div>

        <div class="game-canvas" id="gameCanvas">
            <canvas id="marioCanvas" width="800" height="400"></canvas>
        </div>
        
        <div class="game-tips">
            <h3>æ¸¸æˆæç¤º</h3>
            <ul>
                <li>è·³è·ƒè¸©è¸æ•Œäººå¯ä»¥è·å¾—åˆ†æ•°</li>
                <li>æ”¶é›†é‡‘å¸å¯ä»¥è·å¾—é¢å¤–ç”Ÿå‘½</li>
                <li>é¿å…æ¥è§¦æ•Œäººçš„ä¾§é¢</li>
                <li>åˆ©ç”¨ç®¡é“è¿›å…¥éšè—åŒºåŸŸ</li>
            </ul>
        </div>

        <div class="controls">
            <button id="startBtn">å¼€å§‹æ¸¸æˆ</button>
            <button id="pauseBtn">æš‚åœ</button>
            <button id="resetBtn">é‡æ–°å¼€å§‹</button>
        </div>

        <div class="message" id="gameMessage"></div>
    </div>
    
    <script>
        // é©¬é‡Œå¥¥æ¸¸æˆé€»è¾‘
        class MarioGame {
            constructor() {
                this.canvas = document.getElementById('marioCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.score = 0;
                this.lives = 3;
                this.coins = 0;
                this.gameRunning = false;
                
                this.setupControls();
                this.setupGame();
            }

            setupControls() {
                document.getElementById('startBtn').onclick = () => this.startGame();
                document.getElementById('pauseBtn').onclick = () => this.pauseGame();
                document.getElementById('resetBtn').onclick = () => this.resetGame();
            }

            setupGame() {
                this.ctx.fillStyle = '#87CEEB';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                this.ctx.fillStyle = '#654321';
                this.ctx.fillRect(0, 350, this.canvas.width, 50);
                
                this.ctx.fillStyle = '#FF0000';
                this.ctx.fillRect(50, 300, 30, 50);
                this.ctx.fillStyle = '#FFFF00';
                this.ctx.fillRect(55, 305, 20, 20);
                
                this.ctx.fillStyle = '#000';
                this.ctx.font = '20px Arial';
                this.ctx.fillText('é©¬é‡Œå¥¥å†’é™©å³å°†å¼€å§‹...', 250, 200);
            }

            startGame() {
                if (!this.gameRunning) {
                    this.gameRunning = true;
                    this.showMessage('æ¸¸æˆå¼€å§‹ï¼', 'level-complete');
                    this.gameLoop();
                }
            }

            pauseGame() {
                this.gameRunning = !this.gameRunning;
                if (this.gameRunning) {
                    this.gameLoop();
                } else {
                    this.showMessage('æ¸¸æˆæš‚åœ', 'game-over');
                }
            }

            resetGame() {
                this.gameRunning = false;
                this.score = 0;
                this.lives = 3;
                this.coins = 0;
                this.updateStats();
                this.setupGame();
                this.hideMessage();
            }

            gameLoop() {
                if (!this.gameRunning) return;
                
                // ç®€å•çš„æ¸¸æˆé€»è¾‘
                this.score += 10;
                if (Math.random() < 0.1) {
                    this.coins++;
                }
                
                this.updateStats();
                
                setTimeout(() => this.gameLoop(), 100);
            }

            updateStats() {
                document.getElementById('score').textContent = this.score;
                document.getElementById('lives').textContent = this.lives;
                document.getElementById('coins').textContent = this.coins;
            }

            showMessage(text, type) {
                const messageEl = document.getElementById('gameMessage');
                messageEl.textContent = text;
                messageEl.className = `message show ${type}`;
                setTimeout(() => this.hideMessage(), 2000);
            }

            hideMessage() {
                const messageEl = document.getElementById('gameMessage');
                messageEl.className = 'message';
            }
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        window.onload = () => {
            new MarioGame();
        };
    </script>
</body>
</html>