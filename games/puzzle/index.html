<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>拼图游戏 - 经典益智挑战</title>
    <link rel="stylesheet" href="css/puzzle.css">
</head>
<body>
    <div class="game-container">
        <h1>🧩 拼图游戏 🧩</h1>
        
        <div class="game-info">
            <div class="info-item">
                <div class="info-label">难度</div>
                <div class="info-value" id="difficulty">3×3</div>
            </div>
            <div class="info-item">
                <div class="info-label">移动次数</div>
                <div class="info-value" id="moveCount">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">用时</div>
                <div class="info-value" id="gameTime">00:00</div>
            </div>
            <div class="info-item">
                <div class="info-label">最佳记录</div>
                <div class="info-value" id="bestScore">--</div>
            </div>
        </div>

        <div class="difficulty-selector">
            <button class="difficulty-btn active" onclick="puzzleGame.setDifficulty(3)">3×3 (简单)</button>
            <button class="difficulty-btn" onclick="puzzleGame.setDifficulty(4)">4×4 (中等)</button>
            <button class="difficulty-btn" onclick="puzzleGame.setDifficulty(5)">5×5 (困难)</button>
        </div>

        <div class="image-selector">
            <label for="imageSelect">选择图片：</label>
            <select id="imageSelect" onchange="puzzleGame.changeImage(this.value)">
                <option value="numbers">数字模式</option>
                <option value="landscape">风景图</option>
                <option value="animal">动物图</option>
                <option value="abstract">抽象图案</option>
                <option value="custom">自定义上传</option>
            </select>
            <input type="file" id="customImage" accept="image/*" style="display: none;" onchange="puzzleGame.loadCustomImage(this)">
        </div>

        <div class="controls">
            <button id="newGameBtn" onclick="puzzleGame.newGame()">新游戏</button>
            <button id="shuffleBtn" onclick="puzzleGame.shuffle()">打乱</button>
            <button id="hintBtn" onclick="puzzleGame.showHint()">提示</button>
            <button id="solveBtn" onclick="puzzleGame.autoSolve()">自动求解</button>
        </div>

        <div class="game-board">
            <div class="puzzle-container" id="puzzleContainer">
                <div class="puzzle-grid" id="puzzleGrid">
                    <!-- 拼图块将通过JavaScript生成 -->
                </div>
                <div class="reference-image" id="referenceImage">
                    <h4>参考图</h4>
                    <div class="reference-display" id="referenceDisplay"></div>
                </div>
            </div>
        </div>

        <div class="game-status-panel">
            <div class="status-message" id="statusMessage">选择难度并开始新游戏</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="victory-popup" id="victoryPopup" style="display: none;">
            <div class="victory-content">
                <h2>🎉 恭喜完成！</h2>
                <div class="victory-stats">
                    <div>移动次数: <span id="finalMoves">0</span></div>
                    <div>用时: <span id="finalTime">00:00</span></div>
                    <div id="newRecord" style="display: none;">🏆 新纪录！</div>
                </div>
                <button onclick="puzzleGame.closeVictory(); puzzleGame.newGame();">再来一局</button>
                <button onclick="puzzleGame.closeVictory();">关闭</button>
            </div>
        </div>

        <div class="instructions">
            <h3>🎮 游戏说明</h3>
            <ul>
                <li>🎯 <strong>目标</strong>：将打乱的拼图块重新排列成完整图片</li>
                <li>🖱️ <strong>操作</strong>：点击拼图块移动到空白位置</li>
                <li>🎚️ <strong>难度</strong>：支持3×3、4×4、5×5三种难度</li>
                <li>🖼️ <strong>图片</strong>：可选择预设图片或上传自定义图片</li>
                <li>💡 <strong>提示</strong>：可查看参考图和使用提示功能</li>
                <li>🏆 <strong>记录</strong>：系统记录最佳完成时间和步数</li>
                <li>🤖 <strong>求解</strong>：提供自动求解功能</li>
            </ul>
        </div>
    </div>

    <script src="js/puzzle.js"></script>
</body>
</html>