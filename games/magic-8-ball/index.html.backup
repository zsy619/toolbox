<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¥å¥‡8å·çƒ - Magic 8-Ball | å åœé¢„æµ‹æ¸¸æˆ</title>
    <meta name="description" content="æ‘‡ä¸€æ‘‡ç¥å¥‡8å·çƒï¼Œè·å¾—äººç”Ÿé—®é¢˜çš„ç­”æ¡ˆï¼è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„å åœé¢„æµ‹å·¥å…·ï¼ŒåŒ…å«å¤šç§è¯­è¨€çš„æ™ºæ…§å›ç­”å’Œç‚«é…·çš„3DåŠ¨ç”»æ•ˆæœã€‚">
    <meta name="keywords" content="ç¥å¥‡8å·çƒ,Magic 8-Ball,å åœ,é¢„æµ‹,é—®ç­”,å‘½è¿,å†³ç­–å·¥å…·,å¨±ä¹æ¸¸æˆ">
    <meta name="author" content="Game Creator">
    <meta property="og:title" content="ç¥å¥‡8å·çƒ - Magic 8-Ball">
    <meta property="og:description" content="æ‘‡ä¸€æ‘‡ç¥å¥‡8å·çƒï¼Œè·å¾—äººç”Ÿé—®é¢˜çš„ç­”æ¡ˆï¼ç»å…¸å åœé¢„æµ‹å·¥å…·">
    <meta property="og:type" content="game">
    <link rel="canonical" href="/games/magic-8-ball/">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        .game-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            gap: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: white;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
            align-items: start;
        }

        .ball-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            min-height: 600px;
            justify-content: center;
        }

        .magic-8-ball {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #2c3e50, #000);
            position: relative;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.3),
                inset 0 10px 20px rgba(255, 255, 255, 0.1),
                inset 0 -10px 20px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
        }

        .magic-8-ball:hover {
            transform: scale(1.05) rotateY(5deg);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.4),
                inset 0 10px 20px rgba(255, 255, 255, 0.15),
                inset 0 -10px 20px rgba(0, 0, 0, 0.3);
        }

        .magic-8-ball.shaking {
            animation: shake 0.8s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: rotate(0deg) translateX(0); }
            10% { transform: rotate(-3deg) translateX(-5px); }
            20% { transform: rotate(3deg) translateX(5px); }
            30% { transform: rotate(-3deg) translateX(-5px); }
            40% { transform: rotate(3deg) translateX(5px); }
            50% { transform: rotate(-2deg) translateX(-3px); }
            60% { transform: rotate(2deg) translateX(3px); }
            70% { transform: rotate(-1deg) translateX(-2px); }
            80% { transform: rotate(1deg) translateX(2px); }
        }

        .ball-highlight {
            position: absolute;
            top: 15%;
            left: 20%;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.4), transparent);
            border-radius: 50%;
            filter: blur(3px);
        }

        .answer-window {
            position: absolute;
            bottom: 20%;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #333;
            box-shadow: 
                inset 0 5px 10px rgba(0, 0, 0, 0.5),
                0 5px 15px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .answer-text {
            color: #00ff88;
            font-size: 0.7rem;
            font-weight: 600;
            text-align: center;
            padding: 10px;
            line-height: 1.2;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
            opacity: 0;
            transition: all 0.5s ease;
            transform: translateY(20px);
        }

        .answer-text.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .question-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .question-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            color: white;
            font-size: 1rem;
            min-height: 120px;
            resize: vertical;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .question-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        .question-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .btn {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(238, 90, 36, 0.3);
            width: 100%;
            margin-bottom: 15px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(238, 90, 36, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn.secondary {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            box-shadow: 0 4px 15px rgba(78, 205, 196, 0.3);
        }

        .btn.secondary:hover {
            box-shadow: 0 6px 20px rgba(78, 205, 196, 0.4);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .history-section {
            margin-top: 30px;
        }

        .history-section h3 {
            color: white;
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .history-list {
            max-height: 300px;
            overflow-y: auto;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.1);
            padding: 10px;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 3px solid #ff6b6b;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .history-question {
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .history-answer {
            color: #00ff88;
            font-size: 0.85rem;
            font-style: italic;
        }

        .history-time {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.75rem;
            margin-top: 5px;
        }

        .stats-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .stat-number {
            color: #ff6b6b;
            font-size: 1.8rem;
            font-weight: 700;
            display: block;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.85rem;
            margin-top: 5px;
        }

        .settings-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .setting-group {
            margin-bottom: 15px;
        }

        .setting-group label {
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            display: block;
            margin-bottom: 8px;
        }

        .setting-group select {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 10px;
            color: white;
            font-size: 0.9rem;
        }

        .setting-group select option {
            background: #2c3e50;
            color: white;
        }

        .mystical-effects {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            border-radius: 50%;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, #00ff88, transparent);
            border-radius: 50%;
            opacity: 0;
            animation: float 3s infinite ease-in-out;
        }

        @keyframes float {
            0% {
                opacity: 0;
                transform: translateY(0) scale(0);
            }
            50% {
                opacity: 1;
                transform: translateY(-50px) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) scale(0);
            }
        }

        .instructions {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .instructions h3 {
            color: white;
            font-size: 1.1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .instructions ol {
            color: rgba(255, 255, 255, 0.8);
            padding-left: 20px;
            line-height: 1.6;
        }

        .instructions li {
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .prediction-mood {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .mood-emoji {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }

        .mood-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .game-container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .magic-8-ball {
                width: 250px;
                height: 250px;
            }

            .answer-window {
                width: 100px;
                height: 100px;
            }

            .answer-text {
                font-size: 0.6rem;
                padding: 8px;
            }

            .ball-container {
                padding: 20px;
                min-height: auto;
            }
        }

        .fortune-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .category-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .category-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .category-btn.active {
            background: #ff6b6b;
            border-color: #ff6b6b;
        }

        .loading-spinner {
            display: none;
            width: 30px;
            height: 30px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #00ff88;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .crystal-ball-glow {
            position: absolute;
            top: -20px;
            left: -20px;
            right: -20px;
            bottom: -20px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(0, 255, 136, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .magic-8-ball.glowing .crystal-ball-glow {
            opacity: 1;
            animation: pulse-glow 2s infinite ease-in-out;
        }

        @keyframes pulse-glow {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.1); opacity: 0.6; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>ğŸ”® ç¥å¥‡8å·çƒ</h1>
            <p>é—®ä¸€ä¸ªé—®é¢˜ï¼Œæ‘‡åŠ¨8å·çƒï¼Œæ­ç¤ºå‘½è¿çš„ç­”æ¡ˆï¼å¤è€çš„å åœæ™ºæ…§ä¸ç°ä»£ç§‘æŠ€çš„å®Œç¾ç»“åˆ</p>
        </div>

        <div class="main-content">
            <div class="ball-container">
                <div class="prediction-mood" id="predictionMood">
                    <span class="mood-emoji">ğŸŒŸ</span>
                    <div class="mood-text">å‡†å¤‡æ¥æ”¶å®‡å®™çš„æ™ºæ…§...</div>
                </div>

                <div class="magic-8-ball" id="magicBall">
                    <div class="crystal-ball-glow"></div>
                    <div class="ball-highlight"></div>
                    <div class="answer-window">
                        <div class="answer-text" id="answerText">æ‘‡åŠ¨çƒä½“</div>
                        <div class="loading-spinner" id="loadingSpinner"></div>
                    </div>
                    <div class="mystical-effects" id="mysticalEffects"></div>
                </div>

                <button class="btn" id="shakeBtn">ğŸ¯ æ‘‡åŠ¨8å·çƒ</button>
                <button class="btn secondary" id="askAgainBtn" disabled>ğŸ”„ å†æ¬¡è¯¢é—®</button>
            </div>

            <div class="question-panel">
                <div class="instructions">
                    <h3>ğŸ’« ä½¿ç”¨è¯´æ˜</h3>
                    <ol>
                        <li>åœ¨å¿ƒä¸­æƒ³ä¸€ä¸ªæ˜¯/å¦é—®é¢˜</li>
                        <li>åœ¨ä¸‹æ–¹è¾“å…¥ä½ çš„é—®é¢˜</li>
                        <li>é€‰æ‹©é—®é¢˜ç±»åˆ«</li>
                        <li>ç‚¹å‡»æ‘‡åŠ¨8å·çƒ</li>
                        <li>ç­‰å¾…ç¥ç§˜çš„ç­”æ¡ˆæ˜¾ç°</li>
                    </ol>
                </div>

                <textarea 
                    class="question-input" 
                    id="questionInput" 
                    placeholder="è¾“å…¥ä½ æƒ³è¦è¯¢é—®çš„é—®é¢˜...&#10;&#10;ä¾‹å¦‚ï¼š&#10;â€¢ æˆ‘ä»Šå¤©ä¼šæœ‰å¥½è¿å—ï¼Ÿ&#10;â€¢ è¿™ä¸ªå†³å®šæ˜¯æ­£ç¡®çš„å—ï¼Ÿ&#10;â€¢ æˆ‘åº”è¯¥æ¥å—è¿™ä¸ªå·¥ä½œæœºä¼šå—ï¼Ÿ"
                    maxlength="200"
                ></textarea>

                <div class="fortune-categories">
                    <button class="category-btn active" data-category="general">é€šç”¨</button>
                    <button class="category-btn" data-category="love">çˆ±æƒ…</button>
                    <button class="category-btn" data-category="career">äº‹ä¸š</button>
                    <button class="category-btn" data-category="health">å¥åº·</button>
                    <button class="category-btn" data-category="money">è´¢è¿</button>
                    <button class="category-btn" data-category="study">å­¦ä¹ </button>
                </div>

                <div class="stats-panel">
                    <h3 style="color: white; margin-bottom: 15px;">ğŸ“Š å åœç»Ÿè®¡</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-number" id="totalQuestions">0</span>
                            <div class="stat-label">æ€»é—®é¢˜æ•°</div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="positiveAnswers">0</span>
                            <div class="stat-label">ç§¯æå›ç­”</div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="todayQuestions">0</span>
                            <div class="stat-label">ä»Šæ—¥æé—®</div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="luckyStreak">0</span>
                            <div class="stat-label">å¹¸è¿è¿å‡»</div>
                        </div>
                    </div>
                </div>

                <div class="settings-panel">
                    <h3 style="color: white; margin-bottom: 15px;">âš™ï¸ è®¾ç½®</h3>
                    <div class="setting-group">
                        <label for="languageSelect">ç­”æ¡ˆè¯­è¨€</label>
                        <select id="languageSelect">
                            <option value="zh">ä¸­æ–‡</option>
                            <option value="en">English</option>
                            <option value="mix">ä¸­è‹±æ··åˆ</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label for="moodSelect">å›ç­”é£æ ¼</label>
                        <select id="moodSelect">
                            <option value="classic">ç»å…¸</option>
                            <option value="mystical">ç¥ç§˜</option>
                            <option value="modern">ç°ä»£</option>
                            <option value="humorous">å¹½é»˜</option>
                        </select>
                    </div>
                </div>

                <div class="history-section">
                    <h3>ğŸ“œ å åœå†å²</h3>
                    <button class="btn secondary" id="clearHistoryBtn">æ¸…ç©ºå†å²</button>
                    <div class="history-list" id="historyList">
                        <div style="text-align: center; color: rgba(255,255,255,0.6); padding: 20px;">
                            æš‚æ— å åœè®°å½•
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class Magic8Ball {
            constructor() {
                this.isShaking = false;
                this.currentCategory = 'general';
                this.language = 'zh';
                this.mood = 'classic';
                this.history = [];
                this.stats = {
                    totalQuestions: 0,
                    positiveAnswers: 0,
                    todayQuestions: 0,
                    luckyStreak: 0
                };

                this.answers = {
                    zh: {
                        general: {
                            positive: [
                                'æ˜¯çš„ï¼Œç»å¯¹å¦‚æ­¤', 'æ¯«æ— ç–‘é—®', 'è‚¯å®šæ˜¯çš„', 'ä½ å¯ä»¥ä¾èµ–å®ƒ',
                                'æˆ‘è®¤ä¸ºæ˜¯çš„', 'æœ€æœ‰å¯èƒ½', 'å‰æ™¯å¾ˆå¥½', 'æ˜¯çš„',
                                'æ ‡å¿—è¡¨æ˜æ˜¯çš„', 'å›å¤æœ¦èƒ§ï¼Œè¯·å†è¯•ä¸€æ¬¡'
                            ],
                            negative: [
                                'ä¸è¦æŒ‡æœ›å®ƒ', 'æˆ‘çš„å›ç­”æ˜¯å¦å®šçš„', 'æˆ‘çš„æ¶ˆæ¯æ¥æºè¯´ä¸',
                                'å‰æ™¯ä¸å¤ªå¥½', 'éå¸¸å¯ç–‘'
                            ],
                            neutral: [
                                'å›å¤æœ¦èƒ§ï¼Œè¯·å†è¯•ä¸€æ¬¡', 'ç¨åå†é—®', 'æœ€å¥½ç°åœ¨ä¸å‘Šè¯‰ä½ ',
                                'æ— æ³•é¢„æµ‹', 'ä¸“æ³¨å¹¶å†é—®ä¸€æ¬¡'
                            ]
                        },
                        love: {
                            positive: [
                                'çˆ±æƒ…æ­£åœ¨å‘ä½ èµ°æ¥', 'çœŸçˆ±å°±åœ¨çœ¼å‰', 'å¿ƒæœ‰æ‰€å±ï¼Œæƒ…æœ‰æ‰€å½’',
                                'ç¼˜åˆ†å¤©æ³¨å®š', 'æƒ…æ·±æ„æµ“ï¼Œç™½å¤´å•è€', 'çˆ±æƒ…ç”œèœœå¦‚èœœç³–'
                            ],
                            negative: [
                                'æ­¤æƒ…å¯å¾…æˆè¿½å¿†', 'ç¼˜åˆ†æœªåˆ°', 'æƒ…è·¯åå·éœ€è°¨æ…',
                                'æ„Ÿæƒ…éœ€è¦æ—¶é—´æ²‰æ·€', 'çˆ±æƒ…éœ€è¦æ›´å¤šè€å¿ƒ'
                            ],
                            neutral: [
                                'çˆ±æƒ…æ‰‘æœ”è¿·ç¦»', 'æ„Ÿæƒ…å˜åŒ–è«æµ‹', 'ç¼˜åˆ†éœ€è¦ç­‰å¾…',
                                'çˆ±æƒ…éœ€è¦æ—¶é—´éªŒè¯', 'æƒ…æ„ŸçŠ¶æ€å¤æ‚'
                            ]
                        },
                        career: {
                            positive: [
                                'äº‹ä¸šè’¸è’¸æ—¥ä¸Š', 'æˆåŠŸæŒ‡æ—¥å¯å¾…', 'å‰ç¨‹ä¼¼é”¦',
                                'è´µäººç›¸åŠ©ï¼Œäº‹åŠåŠŸå€', 'æœºé‡éš¾å¾—ï¼ŒæŠŠæ¡è‰¯æœº', 'å‡èŒåŠ è–ªåœ¨æœ›'
                            ],
                            negative: [
                                'äº‹ä¸šéœ€è¦æ›´å¤šåŠªåŠ›', 'æš‚æ—¶é‡åˆ°ç“¶é¢ˆ', 'éœ€è¦è°ƒæ•´ç­–ç•¥',
                                'æ—¶æœºå°šæœªæˆç†Ÿ', 'éœ€è¦ç§¯ç´¯æ›´å¤šç»éªŒ'
                            ],
                            neutral: [
                                'äº‹ä¸šå‘å±•å¹³ç¨³', 'éœ€è¦è€å¿ƒç­‰å¾…', 'ä¿æŒç°çŠ¶ä¸ºä½³',
                                'å‘å±•æ€åŠ¿ä¸æ˜æœ—', 'éœ€è¦è§‚å¯Ÿæ—¶æœº'
                            ]
                        },
                        health: {
                            positive: [
                                'èº«ä½“å¥åº·ï¼Œç²¾ç¥é¥±æ»¡', 'ä½“é­„å¼ºå¥', 'ç”Ÿå‘½åŠ›æ—ºç››',
                                'å¥åº·çŠ¶å†µè‰¯å¥½', 'èº«å¿ƒæ„‰æ‚¦', 'æ´»åŠ›å››å°„'
                            ],
                            negative: [
                                'éœ€è¦æ³¨æ„èº«ä½“', 'åŠ³é€¸ç»“åˆå¾ˆé‡è¦', 'å¥åº·éœ€è¦å…³æ³¨',
                                'æ³¨æ„ä¼‘æ¯è°ƒå…»', 'é¢„é˜²èƒœäºæ²»ç–—'
                            ],
                            neutral: [
                                'å¥åº·çŠ¶å†µä¸€èˆ¬', 'éœ€è¦å®šæœŸæ£€æŸ¥', 'ä¿æŒè‰¯å¥½ä¹ æƒ¯',
                                'å¥åº·éœ€è¦ç»´æŠ¤', 'æ³¨æ„ç”Ÿæ´»è§„å¾‹'
                            ]
                        },
                        money: {
                            positive: [
                                'è´¢è¿äº¨é€š', 'é‡‘é’±æ»šæ»šæ¥', 'è´¢æºå¹¿è¿›',
                                'æŠ•èµ„æœ‰å›æŠ¥', 'æ„å¤–ä¹‹è´¢é™ä¸´', 'è´¢å¯Œå¢é•¿å¯æœŸ'
                            ],
                            negative: [
                                'ç†è´¢éœ€è°¨æ…', 'é¿å…å†²åŠ¨æ¶ˆè´¹', 'è´¢åŠ¡çŠ¶å†µç´§å¼ ',
                                'æŠ•èµ„éœ€è¦ä¸‰æ€', 'èŠ‚çº¦å¼€æ”¯ä¸ºä¸Š'
                            ],
                            neutral: [
                                'è´¢åŠ¡çŠ¶å†µå¹³ç¨³', 'æ”¶æ”¯åŸºæœ¬å¹³è¡¡', 'ç†è´¢éœ€è¦è§„åˆ’',
                                'è´¢è¿å¹³å¹³', 'éœ€è¦å¼€æºèŠ‚æµ'
                            ]
                        },
                        study: {
                            positive: [
                                'å­¦ä¸šè¿›æ­¥ç¥é€Ÿ', 'è€ƒè¯•é¡ºåˆ©é€šè¿‡', 'å­¦ä¹ æ•ˆæœæ˜¾è‘—',
                                'çŸ¥è¯†é¢ä¸æ–­æ‰©å±•', 'æˆç»©ä¼˜å¼‚', 'å­¦ä¹ ç›®æ ‡å¯è¾¾æˆ'
                            ],
                            negative: [
                                'å­¦ä¹ éœ€è¦æ›´åŠ åŠªåŠ›', 'åŸºç¡€éœ€è¦å·©å›º', 'å­¦ä¹ æ–¹æ³•éœ€æ”¹è¿›',
                                'è€ƒè¯•å‹åŠ›è¾ƒå¤§', 'éœ€è¦åŠ å¼ºå¤ä¹ '
                            ],
                            neutral: [
                                'å­¦ä¹ è¿›åº¦æ­£å¸¸', 'éœ€è¦æŒç»­åŠªåŠ›', 'å­¦ä¹ çŠ¶æ€ä¸€èˆ¬',
                                'çŸ¥è¯†æŒæ¡ä¸­ç­‰', 'éœ€è¦åˆ¶å®šå­¦ä¹ è®¡åˆ’'
                            ]
                        }
                    },
                    en: {
                        general: {
                            positive: [
                                'It is certain', 'It is decidedly so', 'Without a doubt', 'Yes definitely',
                                'You may rely on it', 'As I see it, yes', 'Most likely', 'Outlook good',
                                'Yes', 'Signs point to yes'
                            ],
                            negative: [
                                "Don't count on it", 'My reply is no', 'My sources say no',
                                'Outlook not so good', 'Very doubtful'
                            ],
                            neutral: [
                                'Reply hazy, try again', 'Ask again later', 'Better not tell you now',
                                'Cannot predict now', 'Concentrate and ask again'
                            ]
                        }
                    }
                };

                this.moods = {
                    classic: 'ğŸ±',
                    mystical: 'ğŸ”®',
                    modern: 'ğŸ’',
                    humorous: 'ğŸ˜„'
                };

                this.init();
            }

            init() {
                this.setupEventListeners();
                this.loadData();
                this.updateStats();
                this.createParticles();
            }

            setupEventListeners() {
                const shakeBtn = document.getElementById('shakeBtn');
                const askAgainBtn = document.getElementById('askAgainBtn');
                const magicBall = document.getElementById('magicBall');
                const clearHistoryBtn = document.getElementById('clearHistoryBtn');
                const languageSelect = document.getElementById('languageSelect');
                const moodSelect = document.getElementById('moodSelect');

                shakeBtn.addEventListener('click', () => this.shakeBall());
                askAgainBtn.addEventListener('click', () => this.askAgain());
                magicBall.addEventListener('click', () => this.shakeBall());
                clearHistoryBtn.addEventListener('click', () => this.clearHistory());

                languageSelect.addEventListener('change', (e) => {
                    this.language = e.target.value;
                    this.saveData();
                });

                moodSelect.addEventListener('change', (e) => {
                    this.mood = e.target.value;
                    this.updateMoodDisplay();
                    this.saveData();
                });

                // åˆ†ç±»æŒ‰é’®
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.currentCategory = e.target.dataset.category;
                    });
                });

                // é”®ç›˜å¿«æ·é”®
                document.addEventListener('keydown', (e) => {
                    if (e.code === 'Space' && !e.target.matches('textarea, input')) {
                        e.preventDefault();
                        this.shakeBall();
                    }
                    if (e.code === 'Enter' && e.ctrlKey) {
                        this.shakeBall();
                    }
                });

                // è§¦æ‘¸æ”¯æŒ
                let touchStartY = 0;
                magicBall.addEventListener('touchstart', (e) => {
                    touchStartY = e.touches[0].clientY;
                });

                magicBall.addEventListener('touchend', (e) => {
                    const touchEndY = e.changedTouches[0].clientY;
                    const deltaY = Math.abs(touchEndY - touchStartY);
                    if (deltaY > 50) {
                        this.shakeBall();
                    }
                });
            }

            async shakeBall() {
                if (this.isShaking) return;

                const question = document.getElementById('questionInput').value.trim();
                if (!question) {
                    this.showError('è¯·å…ˆè¾“å…¥ä¸€ä¸ªé—®é¢˜ï¼');
                    return;
                }

                this.isShaking = true;
                const magicBall = document.getElementById('magicBall');
                const answerText = document.getElementById('answerText');
                const loadingSpinner = document.getElementById('loadingSpinner');
                const shakeBtn = document.getElementById('shakeBtn');
                const askAgainBtn = document.getElementById('askAgainBtn');

                // å¼€å§‹åŠ¨ç”»
                magicBall.classList.add('shaking', 'glowing');
                answerText.classList.remove('visible');
                loadingSpinner.style.display = 'block';
                shakeBtn.disabled = true;
                askAgainBtn.disabled = true;

                this.createMysticalEffects();

                // ç­‰å¾…åŠ¨ç”»å®Œæˆ
                await this.delay(1200);

                // è·å–ç­”æ¡ˆ
                const answer = this.getRandomAnswer();
                
                // æ˜¾ç¤ºç­”æ¡ˆ
                loadingSpinner.style.display = 'none';
                answerText.textContent = answer.text;
                answerText.classList.add('visible');

                // æ›´æ–°å¿ƒæƒ…æ˜¾ç¤º
                this.updatePredictionMood(answer.type);

                // ä¿å­˜åˆ°å†å²
                this.addToHistory(question, answer.text, answer.type);

                // æ›´æ–°ç»Ÿè®¡
                this.updateStatsAfterAnswer(answer.type);

                // ç»“æŸåŠ¨ç”»
                await this.delay(500);
                magicBall.classList.remove('shaking', 'glowing');
                
                this.isShaking = false;
                shakeBtn.disabled = false;
                askAgainBtn.disabled = false;

                // æ¸…ç©ºé—®é¢˜è¾“å…¥æ¡†
                document.getElementById('questionInput').value = '';
            }

            getRandomAnswer() {
                const categoryAnswers = this.answers[this.language === 'mix' ? 'zh' : this.language];
                const answers = categoryAnswers[this.currentCategory] || categoryAnswers.general;
                
                const allAnswers = [
                    ...answers.positive.map(text => ({ text, type: 'positive' })),
                    ...answers.negative.map(text => ({ text, type: 'negative' })),
                    ...answers.neutral.map(text => ({ text, type: 'neutral' }))
                ];

                // æ·»åŠ ä¸€äº›éšæœºæ€§æƒé‡
                const weights = { positive: 40, negative: 30, neutral: 30 };
                const rand = Math.random() * 100;
                
                let selectedType;
                if (rand < weights.positive) {
                    selectedType = 'positive';
                } else if (rand < weights.positive + weights.negative) {
                    selectedType = 'negative';
                } else {
                    selectedType = 'neutral';
                }

                const typeAnswers = allAnswers.filter(a => a.type === selectedType);
                return typeAnswers[Math.floor(Math.random() * typeAnswers.length)];
            }

            updatePredictionMood(answerType) {
                const moodEmoji = document.querySelector('.mood-emoji');
                const moodText = document.querySelector('.mood-text');
                
                const moods = {
                    positive: { emoji: 'âœ¨', text: 'æ˜Ÿå…‰é—ªè€€ï¼Œå¥½è¿é™ä¸´ï¼' },
                    negative: { emoji: 'ğŸŒ«ï¸', text: 'è¿·é›¾é‡é‡ï¼Œéœ€è¦è€å¿ƒ...' },
                    neutral: { emoji: 'ğŸŒ™', text: 'é™å¾…æ—¶æœºï¼Œä¿æŒå¹³å’Œã€‚' }
                };

                const mood = moods[answerType];
                moodEmoji.textContent = mood.emoji;
                moodText.textContent = mood.text;
            }

            updateMoodDisplay() {
                const emoji = this.moods[this.mood];
                document.querySelector('.mood-emoji').textContent = emoji;
            }

            createMysticalEffects() {
                const effectsContainer = document.getElementById('mysticalEffects');
                
                for (let i = 0; i < 20; i++) {
                    setTimeout(() => {
                        const particle = document.createElement('div');
                        particle.className = 'particle';
                        particle.style.left = Math.random() * 100 + '%';
                        particle.style.animationDelay = Math.random() * 2 + 's';
                        particle.style.animationDuration = (2 + Math.random() * 2) + 's';
                        
                        effectsContainer.appendChild(particle);
                        
                        setTimeout(() => {
                            particle.remove();
                        }, 4000);
                    }, i * 50);
                }
            }

            createParticles() {
                const magicBall = document.getElementById('magicBall');
                setInterval(() => {
                    if (!this.isShaking && Math.random() < 0.3) {
                        const particle = document.createElement('div');
                        particle.className = 'particle';
                        particle.style.left = Math.random() * 100 + '%';
                        particle.style.top = '90%';
                        particle.style.animationDuration = (3 + Math.random() * 2) + 's';
                        
                        magicBall.appendChild(particle);
                        
                        setTimeout(() => {
                            particle.remove();
                        }, 5000);
                    }
                }, 2000);
            }

            askAgain() {
                document.getElementById('questionInput').focus();
            }

            addToHistory(question, answer, type) {
                const historyItem = {
                    question: question,
                    answer: answer,
                    type: type,
                    category: this.currentCategory,
                    timestamp: new Date().toISOString(),
                    date: new Date().toLocaleDateString('zh-CN')
                };

                this.history.unshift(historyItem);
                if (this.history.length > 50) {
                    this.history = this.history.slice(0, 50);
                }

                this.updateHistoryDisplay();
                this.saveData();
            }

            updateHistoryDisplay() {
                const historyList = document.getElementById('historyList');
                
                if (this.history.length === 0) {
                    historyList.innerHTML = '<div style="text-align: center; color: rgba(255,255,255,0.6); padding: 20px;">æš‚æ— å åœè®°å½•</div>';
                    return;
                }

                historyList.innerHTML = this.history.slice(0, 10).map(item => `
                    <div class="history-item">
                        <div class="history-question">${this.escapeHtml(item.question)}</div>
                        <div class="history-answer">"${item.answer}"</div>
                        <div class="history-time">${new Date(item.timestamp).toLocaleString('zh-CN')}</div>
                    </div>
                `).join('');
            }

            updateStatsAfterAnswer(answerType) {
                this.stats.totalQuestions++;
                
                if (answerType === 'positive') {
                    this.stats.positiveAnswers++;
                    this.stats.luckyStreak++;
                } else {
                    this.stats.luckyStreak = 0;
                }

                const today = new Date().toDateString();
                const savedDate = localStorage.getItem('magic8ball_lastDate');
                if (savedDate !== today) {
                    this.stats.todayQuestions = 1;
                    localStorage.setItem('magic8ball_lastDate', today);
                } else {
                    this.stats.todayQuestions++;
                }

                this.updateStats();
                this.saveData();
            }

            updateStats() {
                document.getElementById('totalQuestions').textContent = this.stats.totalQuestions;
                document.getElementById('positiveAnswers').textContent = this.stats.positiveAnswers;
                document.getElementById('todayQuestions').textContent = this.stats.todayQuestions;
                document.getElementById('luckyStreak').textContent = this.stats.luckyStreak;
            }

            clearHistory() {
                if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å åœå†å²å—ï¼Ÿ')) {
                    this.history = [];
                    this.stats = {
                        totalQuestions: 0,
                        positiveAnswers: 0,
                        todayQuestions: 0,
                        luckyStreak: 0
                    };
                    this.updateHistoryDisplay();
                    this.updateStats();
                    this.saveData();
                }
            }

            showError(message) {
                const answerText = document.getElementById('answerText');
                answerText.textContent = message;
                answerText.classList.add('visible');
                answerText.style.color = '#ff6b6b';
                
                setTimeout(() => {
                    answerText.textContent = 'æ‘‡åŠ¨çƒä½“';
                    answerText.style.color = '#00ff88';
                    answerText.classList.remove('visible');
                }, 3000);
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            saveData() {
                const data = {
                    history: this.history,
                    stats: this.stats,
                    language: this.language,
                    mood: this.mood,
                    currentCategory: this.currentCategory
                };
                localStorage.setItem('magic8ball_data', JSON.stringify(data));
            }

            loadData() {
                const saved = localStorage.getItem('magic8ball_data');
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        this.history = data.history || [];
                        this.stats = { ...this.stats, ...data.stats };
                        this.language = data.language || 'zh';
                        this.mood = data.mood || 'classic';
                        this.currentCategory = data.currentCategory || 'general';

                        document.getElementById('languageSelect').value = this.language;
                        document.getElementById('moodSelect').value = this.mood;
                        
                        document.querySelectorAll('.category-btn').forEach(btn => {
                            btn.classList.toggle('active', btn.dataset.category === this.currentCategory);
                        });

                        this.updateHistoryDisplay();
                        this.updateMoodDisplay();
                    } catch (error) {
                        console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
                    }
                }
            }
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        document.addEventListener('DOMContentLoaded', () => {
            new Magic8Ball();
        });

        // æ·»åŠ ä¸€äº›æœ‰è¶£çš„äº¤äº’æ•ˆæœ
        document.addEventListener('mousemove', (e) => {
            const ball = document.getElementById('magicBall');
            const rect = ball.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            const deltaX = (e.clientX - centerX) / 20;
            const deltaY = (e.clientY - centerY) / 20;
            
            ball.style.transform = `perspective(1000px) rotateY(${deltaX}deg) rotateX(${-deltaY}deg)`;
        });

        // é‡ç½®çƒçš„ä½ç½®
        document.addEventListener('mouseleave', () => {
            const ball = document.getElementById('magicBall');
            ball.style.transform = '';
        });
    </script>
</body>
</html>